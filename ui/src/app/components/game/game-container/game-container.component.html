<div class="game-container">
  <div class="messages" #messages>
    <app-messages
      [initial]="width"
      [shown]="messageCenter"
      [message]="message$ | async"
      [timeLeft]="timeLeft$ | async"
    ></app-messages>
  </div>
  <app-menu
    class="app-menu"
    (flip)="this.flipped = !this.flipped"
    (resign)="resignGame()"
  ></app-menu>
  <div
    class="players"
    [ngStyle]="{ height: height + 'px' }"
    [ngClass]="{ flipped: flipped }"
  >
    <app-player
      [playerDto]="(gameDto$ | async)?.whitePlayer"
      [doubling]="getDoubling(PlayerColor.white) | async"
    ></app-player>
    <div
      *ngIf="gameDto$ | async"
      class="stake"
      [ngClass]="{ hilightStake: animatingStake }"
    >
      {{ lokalStake }}
      <i class="fas fa-coins"></i>
    </div>
    <app-player
      [playerDto]="(gameDto$ | async)?.blackPlayer"
      [doubling]="getDoubling(PlayerColor.black) | async"
    ></app-player>
  </div>
  <app-game-board
    class="game-board"
    [width]="width"
    [height]="height"
    [game]="gameDto$ | async"
    [myColor]="playerColor$ | async"
    [dicesVisible]="dicesVisible"
    [flipped]="flipped"
    [themeName]="(user$ | async)?.theme"
    (addMove)="doMove($event)"
    (moveAnimFinished)="moveAnimFinished()"
  ></app-game-board>
  <div class="dices" #dices>
    <app-dices
      *ngIf="dicesVisible"
      [dices]="dices$ | async"
      [color]="diceColor"
    ></app-dices>
  </div>
  <div class="board-buttons" #boardButtons>
    <app-board-buttons
      [undoVisible]="undoVisible"
      [sendVisible]="sendVisible"
      [rollButtonVisible]="rollButtonVisible"
      [newVisible]="newVisible"
      [exitVisible]="exitVisible"
      [acceptDoublingVisible]="acceptDoublingVisible"
      [requestDoublingVisible]="requestDoublingVisible"
      [doublingFactor]="nextDoublingFactor() | async"
      (onUndoMove)="undoMove()"
      (onSendMoves)="sendMoves()"
      (onRoll)="rollButtonClick()"
      (onNew)="newGame()"
      (onExit)="exitGame()"
      (onRequestDoubling)="requestDoubling()"
      (onAcceptDoubling)="acceptDoubling()"
      (onResign)="resignGame()"
    ></app-board-buttons>
  </div>
  <!-- <div class="game-id">{{ (gameDto$ | async)?.id | uppercase }}</div> -->
</div>
